# 智能语音接口

### 获取任务技能列表

```
接口： /tSkill/getTaskList	（GET）
所需参数： 
	number: 第几页
	size: 每页多少条数据
例：
	请求：GET http://localhost:8021/tSkill/getTaskList?number=1&size=2
	结果：
		{
            "trackId": "1680838058881",
            "data": {
                "page": {
                    "number": 1,
                    "size": 2,
                    "total": 18,
                    "offset": 0,
                    "limit": 2
                },
                "list": [
                    {
                        "id": 25,
                        "version": 1,
                        "number": "number02",
                        "name": "语音下订单",
                        "type": 10,
                        "description": "通过语音下订单",
                        "createTime": null,
                        "updateTime": "2023-03-27T19:57:46",
                        "creatorId": 0,
                        "prodLineId": null,
                        "status": 0,
                        "initInterface": null,
                        "iconPath": null,
                        "enabledTaskFlow": false
                    },
                    {
                        "id": 26,
                        "version": 1,
                        "number": "number03",
                        "name": "出差申请",
                        "type": 10,
                        "description": null,
                        "createTime": null,
                        "updateTime": "2023-03-27T19:59:16",
                        "creatorId": 0,
                        "prodLineId": null,
                        "status": 0,
                        "initInterface": null,
                        "iconPath": null,
                        "enabledTaskFlow": false
                    }
                ]
            },
            "code": 0,
            "msg": "成功"
        }
```

### 新增任务技能

```
接口： /tSkill/insertTaskSkill
所需参数： 
	{
		"name": "测试以下啦1",
        "version": 2,
        "number": "testyixiala1",
        "description": "这是一个很牛逼的测试1"
	}
例： 
	请求： post http://localhost:8021/tSkill/insertTaskSkill
	参数：
		{
            "name": "测试以下啦1",
            "version": 2,
            "number": "testyixiala1",
            "description": "这是一个很牛逼的测试1"
        }
    结果：
    {
        "trackId": "1680840291744",
        "data": null,
        "code": 0,
        "msg": "添加数据成功"
    }
```

### 删除任务技能

```
接口： /tSkill/deleteTaskByIdList
所需参数： 23,24,25 (字符串类型id)
例：
	请求： delete http://localhost:8021/tSkill/deleteTaskByIdList
	参数： 40,41
	结果：
		{
            "trackId": "1680837541514",
            "data": null,
            "code": 0,
            "msg": "删除成功"
        }
```

### 更新任务型技能

```
接口： /tSkill/updateTaskById
参数： 
	{
        "id": 34,
        "version": 3,
        "number": "people",
        "name": "转到人工",
        "description": "很厉害的人工服务"
    }
例：
	请求： put  http://localhost:8021/tSkill/updateTaskById
	参数：
        {
            "id": 34,
            "version": 3,
            "number": "people",
            "name": "转到人工",
            "description": "很厉害的人工服务"
        }
    结果：
    	{
            "trackId": "1681042879970",
            "data": null,
            "code": 0,
            "msg": "成功修改数据"
        }
```



### 通过任务技能id获取技能详情

```
接口： tSkill/getTaskById
所需参数： 任务技能id
例：
	请求： get http://localhost:8021/tSkill/getTaskById?id=12
	结果： 
		{
            "trackId": "1680840883827",
            "data": {
                "id": 12,
                "version": 1,
                "number": "number01",
                "name": "销售订单",
                "type": 10,
                "description": "语音下单",
                "createTime": "2023-03-27T15:28:17",
                "updateTime": "2023-03-27T15:30:50",
                "creatorId": 0,
                "prodLineId": null,
                "status": 0,
                "initInterface": null,
                "iconPath": null,
                "enabledTaskFlow": false
            },
            "code": 0,
            "msg": "成功"
        }
```

### 通过技能编码获取意图信息（包括词槽信息）

```
接口： /tSkill/getIntentionAndSlotByNumber
所需数据： 任务技能编码
例：
	请求：get http://localhost:8021/tSkill/getIntentionAndSlotByNumber?number=number01
	结果：
		{
    "trackId": "1680948730526",
    "data": [
        {
            "id": 1,
            "number": "View_Order_List",
            "name": "查看订单",
            "starts": 1,
            "createTime": "2023-03-28T09:41:45.000+0000",
            "isConfirm": 0,
            "confirmTemplate": null,
            "parentId": null,
            "type": "Biz",
            "comment": "查看订单信息",
            "creator": null,
            "cardType": null,
            "autoReply": 0,
            "slotList": [
                "阿巴德",
                "阿巴德",
                "qhx1",
                "浩新",
                "浩新",
                "客户",
                "产品",
                "数量",
                "出发地",
                "目的地",
                "出发时间",
                "清单类型",
                "拆单",
                "计量单位",
                "asfas",
                "出发时间",
                "返回时间",
                "出发地点",
                "返回时间",
                "出差事由",
                "出发城市",
                "目的城市",
                "出发时间",
                "返回时间"
            ]
        },
	.........
    "code": 0,
    "msg": "成功"
}
```

### 添加意图及技能与意图关系

```
接口： /intent/addIntention
所需参数： 
	skillId=12	// 这里是技能id
	{
        "name": "测试以下1",
        "number": "test3",
        "comment": "很牛逼的测试啦！"
    }
例：
	请求： put http://localhost:8021/intent/addIntention?skillId=12
	结果：
	{
        "trackId": "1681010501268",
        "data": [
            15,		// 意图id
            1		// 非0表示添加关系成功
        ],
        "code": 0,
        "msg": "添加成功"
    }
```

### 通过意图编码获取词槽信息

```
接口： /slot/getSlotByNumber
所需参数： 
	number="编码名称"
例：
	请求： get http://localhost:8021/slot/getSlotByNumber?number=View_Order_List
	结果：
		{
    "trackId": "1681011904552",
    "data": [		// 词槽信息
        {
            "id": 20,
            "number": "abc",
            "name": "阿巴德",
            "intentionId": 1,
            "typeId": null,
            "isSpec": 1,
            "queryConfigID": null,
            "voiceTemplet": "你要说的是？",
            "isMust": 0,
            "useDefaultLoc": 0,
            "isFromParent": 0,
            "createTime": "2020-10-08T02:46:24.000+0000",
            "updateTime": null
        },
        {
            "id": 22,
            "number": "abc2",
            "name": "阿巴德",
            "intentionId": 1,
            "typeId": null,
            "isSpec": 2,
            "queryConfigID": null,
            "voiceTemplet": "你要说的是？",
            "isMust": 0,
            "useDefaultLoc": 0,
            "isFromParent": 0,
            "createTime": "2020-10-08T02:48:48.000+0000",
            "updateTime": null
        },
        .............
    ],
    "code": 0,
    "msg": "查询成功"
}
```

### 通过id获取词槽信息

```
接口： /slot/getWordSlotById
参数： 词槽id
例：
	请求： get http://localhost:8021/slot/getWordSlotById?id=22
	结果：
		{
            "trackId": "1681026553216",
            "data": {
                "id": 22,
                "number": "abc2",
                "name": "阿巴德",
                "intentionId": 1,
                "typeId": null,
                "isSpec": 2,
                "queryConfigID": null,
                "voiceTemplet": "你要说的是？",
                "isMust": 0,
                "useDefaultLoc": 0,
                "isFromParent": 0,
                "createTime": "2020-10-08T02:48:48.000+0000",
                "updateTime": null
            },
            "code": 0,
            "msg": "查询成功"
        }
```

### 修改词槽信息

```
接口： /slot/updateSlot
参数： 
	{
        "name": "测试以下啦1",
        "number": 66,
        "voiceTemplet": "测试一下而已啦1",
        "id": 23
    }
例：
	请求： post http://localhost:8021/slot/updateSlot
	参数：
		{
            "name": "测试以下啦1",
            "number": 66,
            "voiceTemplet": "测试一下而已啦1",
            "id": 23
        }
    结果：
    	{
            "trackId": "1681027461572",
            "data": null,
            "code": 0,
            "msg": "成功修改"
        }
```

### 新增词槽信息

```
接口： /slot/addSlot
参数： 
	{
        "name": "添加测试",
        "number": "添加测试",
        "voiceTemplet": "添加测试",
        "intentionId": 15		// 意图参数
    }
例：
	请求： put http://localhost:8021/slot/addSlot
	参数： 
		{
            "name": "添加测试",
            "number": "添加测试",
            "voiceTemplet": "添加测试",
            "intentionId": 15		// 意图参数
        }
     结果：
     	{
            "trackId": "1681029314365",
            "data": 1,
            "code": 0,
            "msg": "添加成功"
        }
```

### 删除词槽信息

```
接口： /slot/deleteSlot
参数： 30,31,32,33,34,35
例：
	请求： delete http://localhost:8021/slot/deleteSlot
	参数： 30,31,32,33,34,35
	结果：
		{
            "trackId": "1681030791083",
            "data": 6,		// 删除的条数
            "code": 0,
            "msg": "删除成功"
        }
```

### 获取问答技能列表

```
接口： /tSkill/getQuestionAnsweringSkills
参数： 
	number: 第几页
	size: 每页多少条数据
例：
	请求： get http://localhost:8021/tSkill/getQuestionAnsweringSkills?number=1&size=1
	结果：
        {
            "trackId": "1681039284748",
            "data": {
                "page": {
                    "number": 1,
                    "size": 1,
                    "total": 9,
                    "offset": 0,
                    "limit": 1
                },
                "list": [
                    {
                        "id": 43,
                        "skillId": null,
                        "intentionId": null,
                        "interfaceId": null,
                        "cardTemplate": null,
                        "version": 1,
                        "number": "test7",
                        "name": "测试7",
                        "type": 20,
                        "description": null,
                        "createTime": null,
                        "updateTime": null,
                        "creatorId": 0,
                        "prodLineId": null,
                        "status": 0,
                        "initInterface": null,
                        "iconPath": null,
                        "enabledTaskFlow": false,
                        "uistyleId": null
                    }
                ]
            },
            "code": 0,
            "msg": "成功"
        }
```

### 删除问答型技能

```
接口： /tSkill/deleteQuestionAnsweringSkill
参数： 49,50,51,52
例：
	请求： delete http://localhost:8021/tSkill/deleteQuestionAnsweringSkill
	参数： 49,50,51,52
	结果：
		{
            "trackId": "1681041503898",
            "data": 1,		// 删除数据的条数
            "code": 0,
            "msg": "删除成功"
        }
```

### 新增问答型技能

```
接口： /tSkill/addQuestionAnsweringSkill
参数： 
	{
        "name": "问答测试以下啦3",
        "version": 3,
        "number": "testyixiala3",
        "description": "这是一个很牛逼的问答测试3"
    }
例：
	请求：put http://localhost:8021/tSkill/addQuestionAnsweringSkill
	参数： 
		{
            "name": "问答测试以下啦3",
            "version": 3,
            "number": "testyixiala3",
            "description": "这是一个很牛逼的问答测试3"
        }
 	结果：
 		{
            "trackId": "1681041765160",
            "data": 1,
            "code": 0,
            "msg": "问答型添加成功"
        }
```

### 编辑问答型技能

```
接口： /tSkill/updateQuestionAnsweringSkill
参数：
	{
        "id": 54,
        "version": 3,
        "number": "people",
        "name": "转到人工",
        "description": "很厉害的人工服务"
    }
例：
	请求： post  http://localhost:8021/tSkill/updateQuestionAnsweringSkill
	参数： 如上
	结果：
        {
            "trackId": "1681043343465",
            "data": 1,
            "code": 0,
            "msg": "问答型数据添加成功"
        }
```

### 参看机器人列表

```
接口： /tRobot/getRobotList
测试：
	请求：get  http://localhost:8021/tRobot/getRobotList?number=1&size=2
	结果：
		{
            "trackId": "1681124273909",
            "data": {
                "page": {
                    "number": 1,
                    "size": 2,
                    "total": 7,
                    "offset": 0,
                    "limit": 2
                },
                "list": [
                    {
                        "id": 13,
                        "number": "1",
                        "name": "演示专用",
                        "version": 2,
                        "description": "用来演示的",
                        "createTime": "2023-03-27T20:53:07",
                        "updateTime": "2023-03-27T20:53:10",
                        "creatorId": 1,
                        "tenantId": null,
                        "sessionInitUrl": null,
                        "appKey": null,
                        "appSecret": null
                    },
                    {
                        "id": 16,
                        "number": "3",
                        "name": "语音订单",
                        "version": 1,
                        "description": "语音订单",
                        "createTime": "2023-03-27T20:53:53",
                        "updateTime": "2023-03-27T20:53:55",
                        "creatorId": 2,
                        "tenantId": null,
                        "sessionInitUrl": null,
                        "appKey": null,
                        "appSecret": null
                    }
                ]
            },
            "code": 0,
            "msg": "成功"
        }
```

### 通过id获取机器人信息

```
接口： /tRobot/getRobotById
测试： 
	请求： 
```

### 添加机器人信息

```
接口： /tRobot/save
参数：
	{
        "name": "测试一下1",
        "number": "test1",
        "version": 1,
        "description": "测试一下添加1"
    }
实例：
	请求： post  http://localhost:8021/tRobot/save
	参数：{
            "name": "测试一下1",
            "number": "test1",
            "version": 1,
            "description": "测试一下添加1"
        }
    结果：
    	{
            "trackId": "1681137755689",
            "data": 1,
            "code": 0,
            "msg": "操作成功"
        }
```

### 更新机器人信息

```
接口： /tRobot/save
参数：{
        "name": "测试一下1",
        "number": "test1",
        "version": 2,
        "description": "测试一下添加1",
        "id": 476978826
    }
测试：
	请求：post  http://localhost:8021/tRobot/save
	参数：{
            "name": "测试一下1",
            "number": "test1",
            "version": 2,
            "description": "测试一下添加1",
            "id": 476978826
        }
    结果：{
            "trackId": "1681138026637",
            "data": 1,
            "code": 0,
            "msg": "操作成功"
        }
```

### 通过id训练机器人

```
接口： /tRobot/trainRobot
实例：
	请求：GET http://localhost:8021/tRobot/trainRobot?id=10
	结果：{
              "trackId": "1681141096730",
              "data": null,
              "code": 0,
              "msg": "训练成功"
            }
```

